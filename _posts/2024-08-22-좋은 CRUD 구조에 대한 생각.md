---
title: 좋은 CRUD 구조에 대한 생각 with REST
date: 2024-08-22 12:00:00 +0800
categories: [Spring, Web]
tags: [Spring, Web]
---

아래 내용은 RESTful한 요청을 제공하는 서버에 대해 생각해보는 것으로 한다.

# **What is RESTful?**

서버는 정적 페이지를 제공할 수도 있고 동적 페이지를 제공할 수도 있으며 데이터에 대한 CRUD를 수행할 수도 있다. <br>
이 중 데이터에 대한 CRUD를 수행하는 방식을 REST 방식이라고 하며 REST API를 사용해서 구성 가능하다.<br>
REST API는 HTTP Method를 이용해 데이터에 대한 연산을 정의하고 URI를 이용해 연산할 데이터를 지정하게 된다. <br><br>

아래의 HTTP Method는 CRUD에 관습적으로 사용된다.

- GET(조회)
- POST(등록)
- PUT(수정)
- PATCH(수정)
- DELETE(삭제)
  <br>

REST API는 다음과 같은 규칙에 따라 생성된다.

1. URI에는 동작을 정의하지 않는다. 자원만을 기술한다.
2. 대문자를 사용하지 않는다.
3. 마지막에 /(슬래시)를 포함하지 않는다.
4. \_(언더바) 를 사용하지 않는다.
5. URI가 길어질 경우 가독성을 위해 -(하이폰)을 사용한다.
6. 확장자는 URI에 포함하지 않는다.
7. 관계가 존재하는 리소스간 has 관계는 아래와 같이 구성한다.
   ```
   parents/1/children/3
   ```

결국 RESTful 하다는 것은 **REST 방식 통신을 지원하는 REST API가 정의된 상태**를 의미한다고 볼 수 있다.

# **RESTful만 만족하면 모두 좋은 CRUD 구조일까?**

정답이 당연히 '아니다'일 것 같은 질문이다. 그렇다면 왜 그런가를 알아야 했다. <br><br>
개인적으로 생각해본 건 유효성 검증과 적절한 HTTP 응답코드의 반환이었다. <br>
Controller의 반환 값 중 ResponseEntity 객체를 이용하면 원하는 데이터와 함께 원하는 HTTP 응답코드를 반환할 수 있다.<br>
또한 올바르지 않은 입력값이 들어왔을 때 적절한 코드를 반환해야 클라이언트측에서도 상황별로 대처가 가능하기 때문에 예측 가능한 상황에 대해 예외처리를 구성하고 내용을 간략히 기술하는 것이 필요하다고 생각했다.<br><br>
그런데 클라이언트측에서 input, form 요소들에 대한 유효성 검증을 진행하면 서버측에서는 유효성 검증이 불필요하다는 생각이 들었다.<br>
이는 **1. 서버에서 전달받은 패킷이 모두 유효한 사용자로부터 전달받은 것**이며 **2. 클라이언트의 유효성 검증을 통해 유효하지 않은 요청은 모두 거절되었다**는 전제가 포함되어 있었다.<br>
따라서 보다 안전한 서버를 구성하기 위해서는 서버와 클라이언트측 모두 유효성 검증이 필요하다는 것을 알게 되었다.<br><br>

결론적으로 REST API를 기반으로한 좋은 CRUD 구조에는 유효성 검증을 통한 적절한 HTTP 응답 코드 반환 뿐만 아니라 다양한 REST API 구성 조건들을 만족하는 것이 중요하다는 것을 알게 되었다.<br>
이후에는 HTTP 응답 코드에 대해 좀 더 세부적으로 이해하고 클라이언트 구성에 있어서 어떻게 문서화하는 것이 좋은지 고민하게 될 것 같다.
